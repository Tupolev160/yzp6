!function(){let e=[],t=0,n=0;const o=[],i="./photos/_p",l="LOCAL_CUR_PAGE",r="LOCAL_RANDOM_PAGE",c="LOCAL_DISLOCATE",a="LOCAL_ROTATE180";localStorage.removeItem("LOCAL_RANDOM");const s=function(){return/(Android|Phone|Harmony|hmscore|Pad|iPod|webOS|wOSBrowser|hp-tablet|BlackBerry|SAMSUNG|iOS|Symbian|Nikoa)/gi.test(navigator.userAgent)},d=function(e,t){return Math.round(Math.random()*(t-e)+e)},u=function(e,t){$("main .container")[0].style.setProperty(e,t)},g=function(e,t,n){const o=document.createElement("li");if(o.className="content-item"+t+n,o.key=1*e.p,e.core){const t=new Image;t.src=i+`${e.core}.png`,t.className="img-core",o.appendChild(t)}if(e.origin){const t=new Image;t.src=i+`${e.origin}.png`,t.className="img-origin",o.appendChild(t)}if(e.hc){const t=new Image;t.src=i+`${e.hc}.gif`,t.className="img-hc",o.appendChild(t)}return o},f=function(){let e=document.createDocumentFragment();for(const t of o)e.appendChild(t);const t=$("ul.item-list");t.empty(),t.append(e),e=null,m()},p=function(){$.get({url:"./data-photos.min.json?token="+Math.random(),success:(n,i)=>{if("success"!==i)return A("%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E5%A4%B1%E8%B4%A5%EF%BC%81");e=n,t=Math.floor(n.length/2),function(e){if(null==e)return A("%E6%95%B0%E6%8D%AE%E4%B8%BA%E7%A9%BA%EF%BC%8C%E6%97%A0%E9%9C%80%E6%B8%B2%E6%9F%93%EF%BC%81");o.length=0;const t=JSON.parse(localStorage.getItem(c))||!1,n=JSON.parse(localStorage.getItem(a))||!1;if(n)for(let t=0;t<e.length;t+=2){const n=e[t],o=e[1+t];e[t]=o,e[t+1]=n}const i=n?" rotate180":"",l=n?" posi-down":" posi-up";o.push(g({p:-1},i,l));for(let t=0;t<e.length;t++){const n=e[t],r=1*n.num;n.core=1&r?n.p+"-core-"+n.id:null,n.origin=4&r?n.p+"-origin-"+n.id:null,n.hc=2&r?n.p+"-highContrast-"+n.id:null,n.traitMaker=8&r?n.p+"-trait-"+n.id:null;const c=g(n,i,l);o.push(c)}o.push(g({p:e.length},i,l)),t&&h(!0),f()}(n)},dataType:"json"})},m=function(){const e=JSON.parse(localStorage.getItem(c))||!1,o=JSON.parse(localStorage.getItem(r))||!1;n=e?0:JSON.parse(localStorage.getItem(l))||0,n=!0===o?d(0,t):n,u("--offset-x",-100*n+"vw")},h=function(e){const t=o.length;if(!0===e)for(let e=0;e<t;e++){const t=Math.floor(Math.random()*(e+1)),n=o[e];o[e]=o[t],o[t]=n}else{let e=o.slice();o.fill(null);for(let n=0;n<t;n++){const t=e[n],i=t.key;o[i+1]=t}e=null}},y=function(e){const t=o.length;for(let n=0;n<t;n+=2){const t=o[n],i=o[n+1];o[n]=i,o[n+1]=t,e?(t.className="content-item rotate180 posi-down",i.className="content-item rotate180 posi-down"):(t.className="content-item posi-up",i.className="content-item posi-up")}},E=function(e){!1===(JSON.parse(localStorage.getItem(r))||!1)?-1===e?(e=t,n=t):e===t+1&&(e=0,n=0):e=n=d(0,t),localStorage.setItem(l,JSON.stringify(n)),u("--offset-x",-100*e+"vw")},S=function(e){$("#right-change-check").val(1),$("#left-change-check").val(1);let n=o[2*e+1];if(e!=t&&n){let e=n.querySelector(".img-origin"),t=n.querySelector(".img-core");e&&e.classList.remove("opacity"),t?.style.display&&(t.style.display=""),e=null,t=null}if(n=o[2*e],0!=e&&n){let e=n.querySelector(".img-origin"),t=n.querySelector(".img-core");e&&e.classList.remove("opacity"),t?.style.display&&(t.style.display=""),e=null,t=null}},k=function(e,t){const i=o["right"==e?2*n+1:2*n].querySelector(".img-core");if(!i)return A("%E5%BD%93%E5%89%8D%E6%97%A0%20core%20%E5%B1%82");""!=i.style.display?(i.style.display="",t.textContent=decodeURI("%E5%BD%93%E5%89%8D%E6%98%BE%E7%A4%BA%20core"),t.title=decodeURI("%E5%BD%93%E5%89%8D%E6%98%AF%E4%BB%85%E6%98%BE%E7%A4%BA%20core%20%E5%B1%82")):(i.style.display="none",t.textContent=decodeURI("%E5%BD%93%E5%89%8D%E9%9A%90%E8%97%8F%20core"),t.title=decodeURI("%E5%BD%93%E5%89%8D%E6%98%AF%E4%BB%85%E9%9A%90%E8%97%8F%20core%20%E5%B1%82"))},v=function(){const e=$(".dialog-info");if(0!==e.offset().top)return;const t=e?e[0].querySelector(".body"):null,n=t.children;for(let e=0;e<n.length;e++)t.removeChild(n[e]),e--;n.length=0;const o=0==e.offset().left?"left":"right";e.removeClass(o+"-show"),e.attr("show","0")},C=function(l,r,c){if(0==r.offset().top)return void v();const s=o["left"==l?2*n:2*n+1];if(-1===s.key&&0==n)return;if(s.key===e.length&&n==t)return;const d=JSON.parse(localStorage.getItem(a))||!1,u=e[s.key];let g=null;u.traitMaker&&(g=document.createElement("img"),g.src=i+u.traitMaker+".png",g.style=d?"transform: rotateZ(180deg);":"",c.appendChild(g));const f=document.createElement("p"),p=u.traitText.split("～～");f.innerText=p[0]+(d?p[2]:p[1]),c.appendChild(f),l="left"==l?"right":"left",r.addClass(l),r.attr("show","1"),requestAnimationFrame((()=>{requestAnimationFrame((()=>{r.addClass(l+"-show")}))}))},A=function(e,t=3){const n=$('<div class="message">'+decodeURI(e)+"</div>");$("body").append(n),requestAnimationFrame((()=>{n.addClass("show")}));let o=null;o=setTimeout((()=>{clearTimeout(o),o=null,o=setTimeout((()=>{clearTimeout(o),o=null,n.remove()}),100*t),n.removeClass("show")}),1e3*t)};$(document).ready((function(){p(),function(){const e=s()?"touchend":"click";$("li.right-arrow").bind(e,(()=>{v("left"),S(n),E(++n)})),$("li.left-arrow").bind(e,(()=>{v("right"),S(n),E(--n)}))}(),function(){const e=$(".dialog-setting"),t=$("#dislocate"),n=$("#rotate-180"),o=$("#random-page"),i=new Map,l="click";$(".settings").on(l,(()=>{const l=JSON.parse(localStorage.getItem(c))||!1,s=JSON.parse(localStorage.getItem(a))||!1,d=JSON.parse(localStorage.getItem(r))||!1;t.prop("checked",l),n.prop("checked",s),o.prop("checked",d),i.set(n,[s,y]),i.set(t,[l,h]),e.show()})),e.bind(l,(t=>{if(!t.target.classList.contains("dialog-setting"))return;let n=!1;for(const[e,t]of i){const o=e.prop("checked");if(o===t[0])continue;const i=t[1];"function"==typeof i&&i(o),n=!0}n&&f(),i.clear(),e.hide()})),n.bind(l,(e=>{localStorage.setItem(a,JSON.stringify(e.target.checked))})),t.bind(l,(e=>{localStorage.setItem(c,JSON.stringify(e.target.checked))})),o.bind(l,(e=>{localStorage.setItem(r,JSON.stringify(e.target.checked))}))}(),function(){let e=null,i=null;const l=s()?"touchend":"mouseleave",r=$("#left-change-check"),c=$("#right-change-check"),a=function(l,r,c){if(null==e&&(e="left"==r?o[2*n]:o[2*n+1]),i||(i=e.querySelector(".img-origin")),n==t&&!i)return;if(0==n&&!i)return;!i.classList.contains("opacity")&&i.classList.add("opacity");const a=c||l.value;u("--img-opacity",1*a),curPage=n};c.on("input",(e=>{a(e.currentTarget,"right")})),c.on(l,(()=>{i&&i.classList.remove("opacity"),c.val(1),i=null,e=null})),r.on("input",(e=>{a(e.currentTarget,"left")})),r.on(l,(()=>{i&&i.classList.remove("opacity"),r.val(1),i=null,e=null})),$("body").bind("keydown",(e=>{49===e.originalEvent.keyCode?a(r,"left",.1):50===e.originalEvent.keyCode&&a(c,"right",.1)})),$("body").bind("keyup",(t=>{i&&i.classList.remove("opacity"),49===t.originalEvent.keyCode?r.val(1):50===t.originalEvent.keyCode&&c.val(1),i=null,e=null}))}(),function(){const e=s()?"touchend":"click",t=$("#right-mnemonic-analysis"),n=$("#left-mnemonic-analysis");$("#right-h-core").bind(e,(e=>k("right",t))),$("#left-h-core").bind(e,(e=>{k("left",n)})),$("body").bind("keyup",(e=>{39===e.originalEvent.keyCode?(e.preventDefault(),e.stopPropagation(),k("right",t)):37===e.originalEvent.keyCode&&(e.preventDefault(),e.stopPropagation(),k("left",n))}))}(),function(){const e=$(".dialog-info"),t=e?e[0].querySelector(".body"):null,n=s()?"touchend":"click";$("#right-mnemonic-analysis").bind(n,(()=>{C("right",e,t)})),$("#left-mnemonic-analysis").bind(n,(()=>{C("left",e,t)})),e.click(v),e.on("transitionend",(()=>{0==e.attr("show")&&(e.removeClass("left"),e.removeClass("right"))}))}(),s()||function(){const e=[33,38,219,189,188],t=[32,40,34,221,187,190],o=[37,38,39,40];$("body").bind("keydown",(e=>{const t=e.originalEvent.keyCode;o.indexOf(t)>=0&&(e.preventDefault(),e.stopPropagation())})),$("body").bind("keyup",(o=>{o.preventDefault(),o.stopPropagation();const i=o.originalEvent.keyCode;e.indexOf(i)>=0&&(v("right"),S(n),E(--n)),t.indexOf(i)>=0&&(v("left"),S(n),E(++n))}))}(),function(){if(location.href.indexOf("web3v.work")>=0){let e=setTimeout((()=>{const t=document.querySelector('p[align="center"]');t.style.display="none",document.body.removeChild(t),clearTimeout(e),e=null,A("广告已移除！")}),1e4)}}()}))}();
