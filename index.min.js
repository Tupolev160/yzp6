!function(){let e=[],t=0,n=0;const o=[],c=[],r="https://raw.githubusercontent.com/Tupolev160/yzp6/refs/heads/main/photos/_p",i="LOCAL_RANDOM",a="LOCAL_ROTATE180",l=function(){return/(Android|Phone|Harmony|hmscore|Pad|iPod|webOS|wOSBrowser|hp-tablet|BlackBerry|SAMSUNG|iOS|Symbian|Nikoa)/gi.test(navigator.userAgent)},s=function(e,t){$("main .container")[0].style.setProperty(e,t)},u=function(e,t,n){const o=document.createElement("li");if(o.className="content-item",o.style=t,e.core){const t=new Image;t.src=r+`${e.core}.png`,t.className=`img-core${n}`,o.appendChild(t)}if(e.origin){const t=new Image;t.src=r+`${e.origin}.png`,t.className=`img-origin${n}`,o.appendChild(t)}if(e.hc){const t=new Image;t.src=r+`${e.hc}.png`,t.className=`img-hc${n}`,o.appendChild(t)}return o},d=function(){$.get({url:"./data-photos?token="+Math.random(),success:(o,r)=>{if("success"!==r)return y("%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E5%A4%B1%E8%B4%A5%EF%BC%81");!function(t){if(null==t)return y("%E6%95%B0%E6%8D%AE%E4%B8%BA%E7%A9%BA%EF%BC%8C%E6%97%A0%E9%9C%80%E6%B8%B2%E6%9F%93%EF%BC%81");c.length=0,JSON.parse(localStorage.getItem("LOCAL_RANDOM")||!1)&&t.sort((()=>.5-Math.random()));const n=JSON.parse(localStorage.getItem("LOCAL_ROTATE180")||!1);if(n)for(let e=0;e<t.length;e+=2){const n=t[e],o=t[1+e];t[e]=o,t[e+1]=n}const o=n?"transform: rotateZ(180deg);":"",r=n?" posi-down":" posi-up",i=document.createDocumentFragment();for(let e=0;e<t.length;e++){const n=t[e];if("jump"===n){const e=u({},o,r);i.appendChild(e),c.push(e);continue}const a=1*n.num;n.core=1&a?n.p+"-core-"+n.id:null,n.origin=4&a?n.p+"-origin-"+n.id:null,n.hc=2&a?n.p+"-highContrast-"+n.id:null,n.traitMaker=8&a?n.p+"-trait-"+n.id:null;const l=u(n,o,r);i.appendChild(l),c.push(l)}const a=$("ul.item-list");a.empty(),a.append(i),e=t,g()}(o),t=Math.floor((o.length-1)/2),h(n)},dataType:"json"})},g=function(){const e=JSON.parse(localStorage.getItem(i)||!1);n=e?0:JSON.parse(localStorage.getItem("LOCAL_CUR_PAGE")||0),s("--offset-x",-100*n+"vw")},h=function(t){o[0]=e[2*t],o[1]=e[2*t+1]},m=function(e){-1===e?(e=t,n=t):e===t+1&&(e=0,n=0),localStorage.setItem("LOCAL_CUR_PAGE",n),h(e),s("--offset-x",-100*e+"vw")},f=function(e){$("#right-change-check").val(1),$("#left-change-check").val(1);let n=c[2*e+1];if(e!=t&&n){let e=n.querySelector(".img-origin"),t=n.querySelector(".img-core");e&&e.classList.remove("opacity"),t?.dataset.src&&(t.src=t.dataset.src),e=null,t=null}if(n=c[2*e],0!=e&&n){let e=n.querySelector(".img-origin"),t=n.querySelector(".img-core");e&&e.classList.remove("opacity"),t?.dataset.src&&(t.src=t.dataset.src),e=null,t=null}},p=function(e,o){const r=c["right"==e?2*n+1:2*n].querySelector(".img-core");if(!r&&(0===n||n===t))return y("%E5%BD%93%E5%89%8D%E6%97%A0%20core%20%E5%B1%82");r.dataset.src?(r.src=r.dataset.src,r.dataset.src="",o.textContent=decodeURI("%E5%BD%93%E5%89%8D%E6%98%BE%E7%A4%BA%20core"),o.title=decodeURI("%E5%BD%93%E5%89%8D%E6%98%AF%E4%BB%85%E6%98%BE%E7%A4%BA%20core%20%E5%B1%82")):(r.dataset.src=r.src,r.src="",o.textContent=decodeURI("%E5%BD%93%E5%89%8D%E9%9A%90%E8%97%8F%20core"),o.title=decodeURI("%E5%BD%93%E5%89%8D%E6%98%AF%E4%BB%85%E9%9A%90%E8%97%8F%20core%20%E5%B1%82"))},E=function(){const e=$(".dialog-info");if(0!==e.offset().top)return;const t=e?e[0].querySelector(".body"):null,n=t.children;for(let e=0;e<n.length;e++)t.removeChild(n[e]),e--;n.length=0;const o=0==e.offset().left?"left":"right";e.removeClass(o+"-show"),e.attr("show","0")},A=function(e,c,i){if(0==c.offset().top)return void E();const a=o["right"==e?0:1];if("jump"===a&&0==n)return;if("jump"===a&&n==t)return;const l=JSON.parse(localStorage.getItem("LOCAL_ROTATE180")||!1);let s=null;a.traitMaker&&(s=document.createElement("img"),s.src=r+a.traitMaker+".png",s.style=l?"transform: rotateZ(180deg);":"",i.appendChild(s));const u=document.createElement("p"),d=a.traitText.split("～～");u.innerText=d[0]+(l?d[2]:d[1]),i.appendChild(u),c.addClass(e),c.attr("show","1"),requestAnimationFrame((()=>{requestAnimationFrame((()=>{c.addClass(e+"-show")}))}))},y=function(e,t=3){const n=$('<div class="message">'+decodeURI(e)+"</div>");$("body").append(n),requestAnimationFrame((()=>{n.addClass("show")}));let o=null;o=setTimeout((()=>{clearTimeout(o),o=null,o=setTimeout((()=>{clearTimeout(o),o=null,n.remove()}),100*t),n.removeClass("show")}),1e3*t)};$(document).ready((function(){d(),function(){const e=l()?"touchend":"click";$("li.right-arrow").bind(e,(()=>{E("left"),f(n),m(++n)})),$("li.left-arrow").bind(e,(()=>{E("right"),f(n),m(--n)}))}(),function(){const e=$(".dialog-setting"),t=$("#rotate-180"),n=$("#random"),o=[],c=l()?"touchend":"click";$(".settings").bind(c,(()=>{o.push(JSON.parse(localStorage.getItem(i)||!1)),o.push(JSON.parse(localStorage.getItem(a)||!1)),n.prop("checked",o[0]),t.prop("checked",o[1]),e.show()})),e.bind(c,(t=>{if(t.target.classList.contains("dialog-setting")){e.hide();let t=!1;for(let e=0;e<o.length;e++){const n=o[e];if($("#random").prop("checked")!==n&&0==e){t=!0;break}if($("#rotate-180").prop("checked")!==n&&1==e){t=!0;break}}t&&d(),o.length=0}})),t.bind(c,(e=>{e.target.checked?localStorage.setItem(a,!0):localStorage.setItem(a,!1)})),n.bind(c,(e=>{e.target.checked?localStorage.setItem(i,!0):localStorage.setItem(i,!1)}))}(),function(){let e=null,o=null;const r=l()?"touchend":"mouseleave",i=function(r,i){if(null==e&&(e="left"==i?c[2*n]:c[2*n+1]),o||(o=e.querySelector(".img-origin")),n==t&&!o)return;if(0==n&&!o)return;!o.classList.contains("opacity")&&o.classList.add("opacity");const a=r.value;s("--img-opacity",1*a),curPage=n};$("#right-change-check").on("input",(e=>{i(e.currentTarget,"right")})),$("#right-change-check").on(r,(()=>{o&&o.classList.remove("opacity"),$("#right-change-check").val(1),o=null,e=null})),$("#left-change-check").on("input",(e=>{i(e.currentTarget,"left")})),$("#left-change-check").on(r,(()=>{o&&o.classList.remove("opacity"),$("#left-change-check").val(1),o=null,e=null}))}(),function(){const e=l()?"touchend":"click";$("#right-h-core").bind(e,(e=>p("right",e.currentTarget))),$("#left-h-core").bind(e,(e=>{p("left",e.currentTarget)}))}(),function(){const e=$(".dialog-info"),t=e?e[0].querySelector(".body"):null,n=l()?"touchend":"click";$("#right-mnemonic-analysis").bind(n,(()=>{A("left",e,t)})),$("#left-mnemonic-analysis").bind(n,(()=>{A("right",e,t)})),e.click(E),e.on("transitionend",(()=>{0==e.attr("show")&&(e.removeClass("left"),e.removeClass("right"))}))}(),l()||function(){const e=[33,37,38,49,219,189,188],t=[34,39,40,50,221,187,190];$("body").bind("keyup",(o=>{const c=o.originalEvent.keyCode;e.indexOf(c)>=0&&(E("right"),f(n),m(--n)),t.indexOf(c)>=0&&(E("left"),f(n),m(++n))}))}()}))}();