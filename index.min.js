!function(){let e=[],t=0,n=0;const o=[],c=[],r="LOCAL_RANDOM",i="LOCAL_ROTATE180",a=function(){return/(Android|Phone|Harmony|hmscore|Pad|iPod|webOS|wOSBrowser|hp-tablet|BlackBerry|SAMSUNG|iOS|Symbian|Nikoa)/gi.test(navigator.userAgent)},s=function(e,t){$("main .container")[0].style.setProperty(e,t)},l=function(e,t,n){const o=document.createElement("li");if(o.className="content-item",o.style=t,e.core){const t=new Image;t.src=`https://raw.githubusercontent.com/Tupolev160/yzp6/refs/heads/main/photos/_p${e.core}.png`,t.className=`img-core${n}`,o.appendChild(t)}if(e.origin){const t=new Image;t.src=`https://raw.githubusercontent.com/Tupolev160/yzp6/refs/heads/main/photos/_p${e.origin}.png`,t.className=`img-origin${n}`,o.appendChild(t)}if(e.hc){const t=new Image;t.src=`https://raw.githubusercontent.com/Tupolev160/yzp6/refs/heads/main/photos/_p${e.hc}.png`,t.className=`img-hc${n}`,o.appendChild(t)}return o},u=function(){$.get({url:"./data-photos?token="+Math.random(),success:(o,r)=>{if("success"!==r)return y("%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E5%A4%B1%E8%B4%A5%EF%BC%81");!function(t){if(null==t)return y("%E6%95%B0%E6%8D%AE%E4%B8%BA%E7%A9%BA%EF%BC%8C%E6%97%A0%E9%9C%80%E6%B8%B2%E6%9F%93%EF%BC%81");c.length=0,JSON.parse(localStorage.getItem("LOCAL_RANDOM")||!1)&&t.sort((()=>.5-Math.random()));const n=JSON.parse(localStorage.getItem("LOCAL_ROTATE180")||!1);if(n)for(let e=0;e<t.length;e+=2){const n=t[e],o=t[1+e];t[e]=o,t[e+1]=n}const o=n?"transform: rotateZ(180deg);":"",r=n?" posi-down":" posi-up",i=document.createDocumentFragment();for(let e=0;e<t.length;e++){const n=t[e];if("jump"===n){const e=l({},o,r);i.appendChild(e),c.push(e);continue}const a=1*n.num;n.core=1&a?n.p+"-core-"+n.id:null,n.origin=4&a?n.p+"-origin-"+n.id:null,n.hc=2&a?n.p+"-highContrast-"+n.id:null,n.traitMaker=8&a?n.p+"-trait-"+n.id:null;const s=l(n,o,r);i.appendChild(s),c.push(s)}const a=$("ul.item-list");a.empty(),a.append(i),e=t,d()}(o),t=Math.floor((o.length-1)/2),g(n)},dataType:"json"})},d=function(){const e=JSON.parse(localStorage.getItem(r)||!1);n=e?0:JSON.parse(localStorage.getItem("LOCAL_CUR_PAGE")||0),s("--offset-x",-100*n+"vw")},g=function(t){o[0]=e[2*t],o[1]=e[2*t+1]},h=function(e){-1===e?(e=t,n=t):e===t+1&&(e=0,n=0),localStorage.setItem("LOCAL_CUR_PAGE",n),g(e),s("--offset-x",-100*e+"vw")},m=function(e){$("#right-change-check").val(1),$("#left-change-check").val(1);let n=c[2*e+1];if(e!=t&&n){let e=n.querySelector(".img-origin"),t=n.querySelector(".img-core");e&&e.classList.remove("opacity"),t?.dataset.src&&(t.src=t.dataset.src),e=null,t=null}if(n=c[2*e],0!=e&&n){let e=n.querySelector(".img-origin"),t=n.querySelector(".img-core");e&&e.classList.remove("opacity"),t?.dataset.src&&(t.src=t.dataset.src),e=null,t=null}},p=function(e,o){const r=c["right"==e?2*n+1:2*n].querySelector(".img-core");if(!r&&(0===n||n===t))return y("%E5%BD%93%E5%89%8D%E6%97%A0%20core%20%E5%B1%82");r.dataset.src?(r.src=r.dataset.src,r.dataset.src="",o.textContent=decodeURI("%E5%BD%93%E5%89%8D%E6%98%BE%E7%A4%BA%20core"),o.title=decodeURI("%E5%BD%93%E5%89%8D%E6%98%AF%E4%BB%85%E6%98%BE%E7%A4%BA%20core%20%E5%B1%82")):(r.dataset.src=r.src,r.src="",o.textContent=decodeURI("%E5%BD%93%E5%89%8D%E9%9A%90%E8%97%8F%20core"),o.title=decodeURI("%E5%BD%93%E5%89%8D%E6%98%AF%E4%BB%85%E9%9A%90%E8%97%8F%20core%20%E5%B1%82"))},f=function(){const e=$(".dialog-info");if(0!==e.offset().top)return;const t=e?e[0].querySelector(".body"):null,n=t.children;for(let e=0;e<n.length;e++)t.removeChild(n[e]),e--;n.length=0;const o=0==e.offset().left?"left":"right";e.removeClass(o+"-show"),e.attr("show","0")},E=function(e,c,r){if(0==c.offset().top)return void f();const i=o["right"==e?0:1];if("jump"===i&&0==n)return;if("jump"===i&&n==t)return;const a=JSON.parse(localStorage.getItem("LOCAL_ROTATE180")||!1);let s=null;i.traitMaker&&(s=document.createElement("img"),s.src="https://raw.githubusercontent.com/Tupolev160/yzp6/refs/heads/main/photos/_p"+i.traitMaker+".png",s.style=a?"transform: rotateZ(180deg);":"",r.appendChild(s));const l=document.createElement("p"),u=i.traitText.split("～～");l.innerText=u[0]+(a?u[2]:u[1]),r.appendChild(l),c.addClass(e),c.attr("show","1"),requestAnimationFrame((()=>{requestAnimationFrame((()=>{c.addClass(e+"-show")}))}))},y=function(e,t=3){const n=$('<div class="message">'+decodeURI(e)+"</div>");$("body").append(n),requestAnimationFrame((()=>{n.addClass("show")}));let o=null;o=setTimeout((()=>{clearTimeout(o),o=null,o=setTimeout((()=>{clearTimeout(o),o=null,n.remove()}),100*t),n.removeClass("show")}),1e3*t)};$(document).ready((function(){u(),function(){const e=a()?"touchend":"click";$("li.right-arrow").bind(e,(()=>{f("left"),m(n),h(++n)})),$("li.left-arrow").bind(e,(()=>{f("right"),m(n),h(--n)}))}(),function(){const e=$(".dialog-setting"),t=$("#rotate-180"),n=$("#random"),o=[],c=a()?"touchend":"click";$(".settings").bind(c,(()=>{o.push(JSON.parse(localStorage.getItem(r)||!1)),o.push(JSON.parse(localStorage.getItem(i)||!1)),n.prop("checked",o[0]),t.prop("checked",o[1]),e.show()})),e.bind(c,(t=>{if(t.target.classList.contains("dialog-setting")){e.hide();let t=!1;for(let e=0;e<o.length;e++){const n=o[e];if($("#random").prop("checked")!==n&&0==e){t=!0;break}if($("#rotate-180").prop("checked")!==n&&1==e){t=!0;break}}t&&u(),o.length=0}})),t.bind(c,(e=>{e.target.checked?localStorage.setItem(i,!0):localStorage.setItem(i,!1)})),n.bind(c,(e=>{e.target.checked?localStorage.setItem(r,!0):localStorage.setItem(r,!1)}))}(),function(){let e=null,o=null;const r=a()?"touchend":"mouseleave",i=function(r,i){if(null==e&&(e="left"==i?c[2*n]:c[2*n+1]),o||(o=e.querySelector(".img-origin")),n==t&&!o)return;if(0==n&&!o)return;!o.classList.contains("opacity")&&o.classList.add("opacity");const a=r.value;s("--img-opacity",1*a),curPage=n};$("#right-change-check").on("input",(e=>{i(e.currentTarget,"right")})),$("#right-change-check").on(r,(()=>{o&&o.classList.remove("opacity"),$("#right-change-check").val(1),o=null,e=null})),$("#left-change-check").on("input",(e=>{i(e.currentTarget,"left")})),$("#left-change-check").on(r,(()=>{o&&o.classList.remove("opacity"),$("#left-change-check").val(1),o=null,e=null}))}(),function(){const e=a()?"touchend":"click";$("#right-h-core").bind(e,(e=>p("right",e.currentTarget))),$("#left-h-core").bind(e,(e=>{p("left",e.currentTarget)}))}(),function(){const e=$(".dialog-info"),t=e?e[0].querySelector(".body"):null,n=a()?"touchend":"click";$("#right-mnemonic-analysis").bind(n,(()=>{E("left",e,t)})),$("#left-mnemonic-analysis").bind(n,(()=>{E("right",e,t)})),e.click(f),e.on("transitionend",(()=>{0==e.attr("show")&&(e.removeClass("left"),e.removeClass("right"))}))}(),a()||function(){const e=[33,37,38,49,219,189,188],t=[34,39,40,50,221,187,190];$("body").bind("keyup",(o=>{const c=o.originalEvent.keyCode;e.indexOf(c)>=0&&(f("right"),m(n),h(--n)),t.indexOf(c)>=0&&(f("left"),m(n),h(++n))}))}()}))}();
